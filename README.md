# Аналитический сервис сокращения ссылок

## Обзор проекта

Этот сервис позволяет пользователям сокращать длинные URL-адреса, а затем получать по ним базовую аналитику. Он идеально подходит для отслеживания переходов по ссылкам в маркетинговых кампаниях, социальных сетях или любых других каналах.

### Ключевые возможности:

  * **Сокращение URL**: Создание коротких и уникальных алиасов для длинных ссылок.
  * **Редирект**: Перенаправление пользователей с короткой ссылки на оригинальный URL.
  * **Аналитика переходов**: Отслеживание количества переходов по каждой короткой ссылке.

## Технологии

  * **Go**: Основной язык разработки.
  * **`chi`**: Легковесный и мощный HTTP-роутер.
  * **`slog`**: Стандартная библиотека логирования для структурированного вывода.
  * **`testify`**: Библиотека для удобного тестирования.
  * **PostgreSQL**: Реляционная база данных для хранения данных.

## Установка и запуск

### 1\. Клонирование репозитория

```bash
git clone github.com/veylin2175/url-shortener-analytics
cd analiticsURLShortener
```

### 2\. Настройка конфигурации

Создай файл `local.yml` в директории `config` проекта, используя `config/local.example.yml` в качестве примера. Заполни его своими данными для подключения к базе данных и другими настройками.



### 3\. Запуск проекта

```bash
go run ./cmd/url-shortener/main.go
```

## API

### Создание короткой ссылки

`POST /shorten`

**Тело запроса:**

```json
{
  "url": "https://example.com/very/long/url/path",
  "alias": "my_alias"
}
```

  * `url` (string, **обязательно**): Оригинальная длинная ссылка.
  * `alias` (string, необязательно): Желаемый алиас. Если не указан, будет сгенерирован автоматически.

**Ответ (успешно):**

```json
{
  "status": "OK",
  "alias": "my_alias"
}
```

### Переход по короткой ссылке

`GET /s/{short_url}`

При переходе по этой ссылке, сервис перенаправит пользователя на оригинальный URL.

### Получение аналитики

`GET /analytics/{short_url}`

**Ответ (успешно):**

```json
{
  "status": "OK",
  "total_clicks": 10,
  "daily_clicks": {
    "2025-08-11T00:00:00Z": 3
  },
  "user_agents": {
    "Mozilla/5.0 ...": 7,
    "Googlebot/2.1 ...": 3
  }
}
```

## Тестирование

Для запуска тестов используй следующую команду:

```bash
go test ./...
```
